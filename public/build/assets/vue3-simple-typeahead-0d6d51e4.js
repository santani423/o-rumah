import{p as m,h as f,J as c,o as s,f as n,e as I,v as y,b as S,Y as $,$ as l,d as o,H as u,l as a,F as g,g as v,n as T}from"./app-0e08b8e7.js";var d=c({name:"Vue3SimpleTypeahead",emits:["onInput","onFocus","onBlur","selectItem"],inheritAttrs:!1,props:{id:{type:String},placeholder:{type:String,default:""},items:{type:Array,required:!0},defaultItem:{default:null},itemProjection:{type:Function,default(e){return e}},minInputLength:{type:Number,default:2,validator:e=>e>=0},minItemLength:{type:Number,default:0,validator:e=>e>=0},selectOnTab:{type:Boolean,default:!0}},mounted(){this.defaultItem!==void 0&&this.defaultItem!==null&&this.selectItem(this.defaultItem)},data(){return{inputId:this.id||`simple_typeahead_${(Math.random()*1e3).toFixed()}`,input:"",isInputFocused:!1,currentSelectionIndex:0}},methods:{onInput(){this.isListVisible&&this.currentSelectionIndex>=this.filteredItems.length&&(this.currentSelectionIndex=(this.filteredItems.length||1)-1),this.$emit("onInput",{input:this.input,items:this.filteredItems})},onFocus(){this.isInputFocused=!0,this.$emit("onFocus",{input:this.input,items:this.filteredItems})},onBlur(){this.isInputFocused=!1,this.$emit("onBlur",{input:this.input,items:this.filteredItems})},onArrowDown(e){this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length-1&&this.currentSelectionIndex++,this.scrollSelectionIntoView()},onArrowUp(e){this.isListVisible&&this.currentSelectionIndex>0&&this.currentSelectionIndex--,this.scrollSelectionIntoView()},scrollSelectionIntoView(){setTimeout(()=>{const e=document.querySelector(`#${this.wrapperId} .simple-typeahead-list`),t=document.querySelector(`#${this.wrapperId} .simple-typeahead-list-item.simple-typeahead-list-item-active`);if(!(t.offsetTop>=e.scrollTop&&t.offsetTop+t.offsetHeight<e.scrollTop+e.offsetHeight)){let r=0;t.offsetTop>e.scrollTop?r=t.offsetTop+t.offsetHeight-e.offsetHeight:t.offsetTop<e.scrollTop&&(r=t.offsetTop),e.scrollTo(0,r)}})},selectCurrentSelection(){this.currentSelection&&this.selectItem(this.currentSelection)},selectCurrentSelectionTab(){this.selectOnTab?this.selectCurrentSelection():this.$refs.inputRef.blur()},selectItem(e){this.input=this.itemProjection(e),this.currentSelectionIndex=0,this.$refs.inputRef.blur(),this.$emit("selectItem",e)},escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},boldMatchText(e){const t=new RegExp(`(${this.escapeRegExp(this.input)})`,"ig");return e.replace(t,"<strong>$1</strong>")},clearInput(){this.input=""},getInput(){return this.$refs.inputRef},focusInput(){this.$refs.inputRef.focus(),this.onFocus()},blurInput(){this.$refs.inputRef.blur(),this.onBlur()}},computed:{wrapperId(){return`${this.inputId}_wrapper`},filteredItems(){const e=new RegExp(this.escapeRegExp(this.input),"i");return this.items.filter(t=>this.itemProjection(t).match(e))},isListVisible(){return this.isInputFocused&&this.input.length>=this.minInputLength&&this.filteredItems.length>this.minItemLength},currentSelection(){return this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length?this.filteredItems[this.currentSelectionIndex]:void 0}}});m("data-v-f81ca714");const w=["id"],b=["id","placeholder"],F={key:0,class:"simple-typeahead-list"},V={key:0,class:"simple-typeahead-list-header"},L=["onClick","onMouseenter"],C=["data-text"],M=["data-text","innerHTML"],B={key:1,class:"simple-typeahead-list-footer"};f();function R(e,t,r,k,P,j){return s(),n("div",{id:e.wrapperId,class:"simple-typeahead"},[I(S("input",$({ref:"inputRef",id:e.inputId,class:"simple-typeahead-input",type:"text",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=i=>e.input=i),onInput:t[1]||(t[1]=(...i)=>e.onInput&&e.onInput(...i)),onFocus:t[2]||(t[2]=(...i)=>e.onFocus&&e.onFocus(...i)),onBlur:t[3]||(t[3]=(...i)=>e.onBlur&&e.onBlur(...i)),onKeydown:[t[4]||(t[4]=l(o((...i)=>e.onArrowDown&&e.onArrowDown(...i),["prevent"]),["down"])),t[5]||(t[5]=l(o((...i)=>e.onArrowUp&&e.onArrowUp(...i),["prevent"]),["up"])),t[6]||(t[6]=l(o((...i)=>e.selectCurrentSelection&&e.selectCurrentSelection(...i),["prevent"]),["enter"])),t[7]||(t[7]=l(o((...i)=>e.selectCurrentSelectionTab&&e.selectCurrentSelectionTab(...i),["prevent"]),["tab"]))],autocomplete:"off"},e.$attrs),null,16,b),[[y,e.input]]),e.isListVisible?(s(),n("div",F,[e.$slots["list-header"]?(s(),n("div",V,[u(e.$slots,"list-header")])):a("",!0),(s(!0),n(g,null,v(e.filteredItems,(i,p)=>(s(),n("div",{class:T(["simple-typeahead-list-item",{"simple-typeahead-list-item-active":e.currentSelectionIndex==p}]),key:p,onMousedown:t[8]||(t[8]=o(()=>{},["prevent"])),onClick:h=>e.selectItem(i),onMouseenter:h=>e.currentSelectionIndex=p},[e.$slots["list-item-text"]?(s(),n("span",{key:0,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(i)},[u(e.$slots,"list-item-text",{item:i,itemProjection:e.itemProjection,boldMatchText:e.boldMatchText})],8,C)):(s(),n("span",{key:1,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(i),innerHTML:e.boldMatchText(e.itemProjection(i))},null,8,M))],42,L))),128)),e.$slots["list-footer"]?(s(),n("div",B,[u(e.$slots,"list-footer")])):a("",!0)])):a("",!0)],8,w)}d.render=R;d.__scopeId="data-v-f81ca714";var H=(()=>{const e=d;return e.install=t=>{t.component("Vue3SimpleTypeahead",e)},e})();export{H as e};
