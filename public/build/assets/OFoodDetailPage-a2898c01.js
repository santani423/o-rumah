import{j as x,G as U,B as A,T as C,o as d,c as y,w as u,Q as W,a as n,D as a,Z as H,b as s,u as v,d as F,e as c,v as m,f,t as g,l as p,R as K,i as _}from"./app-0e08b8e7.js";import{A as O}from"./index-5ab667d5.js";import{_ as R}from"./FrontLayout-2bfbfc46.js";import{A as I}from"./AgentCard-f990d982.js";import{_ as b}from"./DefaultButton-07f6876e.js";import{r as G,_ as Q}from"./PropertyDetailImageGrid-d2b73761.js";import{u as Z,c as z}from"./Navbar-db97468d.js";import{_ as J}from"./OMerchantDetailInfo-f4792610.js";import{r as X}from"./ArrowLeftIcon-dc25c3fe.js";import{r as Y}from"./ShareIcon-48d81efa.js";import"./Footer-1cc72079.js";import"./LinkButton-77398b75.js";import"./PhoneIcon-95e4a6ba.js";import"./Divider-ce31086d.js";import"./description-8ebb68a9.js";import"./transition-95532faa.js";import"./use-tree-walker-a6b88a9a.js";const ee={class:"px-4 mx-auto space-y-6 max-w-7xl sm:p-6 lg:p-8"},se={class:"flex flex-col md:flex-row md:justify-between"},te={class:"flex gap-2"},ae=s("span",null,"Difavoritkan",-1),oe=s("span",null,"Favoritkan",-1),re={class:"flex gap-12"},ie={class:"w-4/6"},ne={class:"w-2/6 space-y-6"},le={key:0,class:"modal-overlay fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},de={class:"modal-content bg-white p-4 rounded-lg"},ue={class:"modal-header p-4 flex justify-between items-center"},ce={class:"text-2xl font-bold text-center text-neutral-900 flex-grow"},me=s("div",{class:"w-full border-t border-gray-300"},null,-1),ge={class:"modal-body p-4"},fe={key:0,class:"p-3 bg-red-100 text-red-700 rounded"},pe={key:1,class:"mb-4"},be=s("label",{for:"nama",class:"block text-sm font-medium text-gray-700"},"Nama:",-1),we={class:"mb-4"},he=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email:",-1),xe={key:2,class:"mb-4"},ye=s("label",{for:"no-wa",class:"block text-sm font-medium text-gray-700"},"No WhatsApp:",-1),ve={class:"mb-4"},_e={for:"password",class:"block text-sm font-medium text-gray-700"},ke={key:3,class:"mb-4"},Te=s("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Konfirmasi Password:",-1),Pe={type:"submit",class:"inline-flex items-center gap-x-2 w-full justify-center rounded-md px-3.5 py-2.5 text-white ring-1 bg-teal-400 ring-inset ring-teal-400 hover:bg-teal-500"},qe={class:"modal-footer p-4"},Fe={class:"text-sm text-center"},Ie={__name:"OFoodDetailPage",props:{ads:Object,media:Object,agent:Object,like:Boolean,slug:String,typeFood:String,routingName:{type:String,default:"linkKpr"}},setup(r){const{ads:k,slug:Me,agent:T,like:M,typeFood:N}=r;Z();const i=x(!0),V=x(M),j=O({position:"top-right",duration:2300,queue:!0,max:1}),B=U(()=>W().props.auth.user),P=A({isFavorited:V.value}),e=C({ads_id:k.ads_id}),E=()=>window.history.back(),$=()=>{const l=window.location.href;navigator.clipboard.writeText(l),j.success("Link berhasil disalin!")},w=()=>{if(!B.value){q();return}console.log("agent:",T),_.post(route("ad.like"),{addId:k.ads_id,agentId:T.id,type:N}).then(l=>{console.log("HTTP request sent successfully:",l.data),P.isFavorited=l.data.like}).catch(l=>{console.error("Error sending HTTP request:",l),e.errorMessage="Username atau password salah"})},h=x(!1),q=()=>{h.value=!h.value},D=()=>{i.value=!i.value},L=async(l,o)=>{console.log("Email:",e.email,"Password:",e.password),e.processing=!0,e.errorMessage="",_.post(route("auth.in.login"),{email:e.email,password:e.password}).then(t=>{console.log("HTTP request sent successfully:",t.data.success),t.data.success===!0?(w(),location.reload()):e.errorMessage="Email atau Password anda salah!"}).catch(t=>{console.error("Error sending HTTP request:",t),e.errorMessage="Username atau password salah"})},S=async(l,o)=>{console.log("Email:",e.email,"Password:",e.password),console.log("Wa:",e.noWa,"Konfirmasi:",e.confirmPassword),_.post(route("auth.in.registrasi"),{email:e.email,password:e.password,nama:e.nama,noWa:e.noWa}).then(t=>{console.log("HTTP request sent successfully:",t.data),t.data.success===!0?(w(),location.reload()):e.errorMessage="Ada kesalahan dalam pengisian form!"}).catch(t=>{console.error("Error sending HTTP request:",t),e.errorMessage="Terjadi kesalahan saat registrasi"})};return(l,o)=>(d(),y(R,null,{default:u(()=>[n(a(H),{title:r.ads.title},null,8,["title"]),s("div",ee,[s("div",se,[n(b,{onClick:o[0]||(o[0]=t=>E())},{default:u(()=>[n(a(X),{class:"w-4 h-4 mr-2 text-neutral-900","aria-hidden":"true"}),v(" Kembali ")]),_:1}),s("div",te,[s("form",{onSubmit:F(w,["prevent"])},[c(s("input",{type:"hidden","onUpdate:modelValue":o[1]||(o[1]=t=>a(e).ads_id=t)},null,512),[[m,a(e).ads_id]]),P.isFavorited?(d(),y(b,{key:0,type:"submit"},{default:u(()=>[n(a(G),{class:"w-4 h-4 mr-2 text-red-500","aria-hidden":"true"}),ae]),_:1})):(d(),y(b,{key:1,type:"submit"},{default:u(()=>[n(a(z),{class:"w-4 h-4 mr-2 text-area-900","aria-hidden":"false"}),oe]),_:1}))],32),n(b,{onClick:$},{default:u(()=>[n(a(Y),{class:"w-4 h-4 mr-2 text-neutral-900","aria-hidden":"true"}),v(" Bagikan ")]),_:1})])]),n(Q,{media:r.media},null,8,["media"]),s("div",re,[s("div",ie,[n(J,{title:r.ads.title,area:r.ads.district,description:r.ads.description,lat:r.ads.districtLocation_lat,lng:r.ads.districtLocation_long},null,8,["title","area","description","lat","lng"])]),s("div",ne,[n(I,{agent:r.agent,slug:r.slug,"show-stats":!1,showKpr:!0},null,8,["agent","slug"])])])]),n(K,{name:"fade"},{default:u(()=>[h.value?(d(),f("div",le,[s("div",de,[s("form",{onSubmit:o[7]||(o[7]=F(t=>i.value?L(r.slug,r.routingName):S(r.slug,r.routingName),["prevent"]))},[s("div",ue,[s("h2",ce,g(i.value?"Login":"Registrasi"),1),s("button",{onClick:q,class:"text-2xl"}," Ã— ")]),me,s("div",ge,[a(e).errorMessage?(d(),f("div",fe,g(a(e).errorMessage),1)):p("",!0),i.value?p("",!0):(d(),f("div",pe,[be,c(s("input",{type:"text",id:"nama","onUpdate:modelValue":o[2]||(o[2]=t=>a(e).nama=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[m,a(e).nama]])])),s("div",we,[he,c(s("input",{type:"email",id:"email","onUpdate:modelValue":o[3]||(o[3]=t=>a(e).email=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[m,a(e).email]])]),i.value?p("",!0):(d(),f("div",xe,[ye,c(s("input",{type:"number",id:"no-wa","onUpdate:modelValue":o[4]||(o[4]=t=>a(e).noWa=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[m,a(e).noWa]])])),s("div",ve,[s("label",_e,g(i.value?"Password:":"Buat Password:"),1),c(s("input",{type:"password",id:"password","onUpdate:modelValue":o[5]||(o[5]=t=>a(e).password=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[m,a(e).password]])]),i.value?p("",!0):(d(),f("div",ke,[Te,c(s("input",{type:"password",id:"confirm-password","onUpdate:modelValue":o[6]||(o[6]=t=>a(e).confirmPassword=t),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[m,a(e).confirmPassword]])])),s("button",Pe,g(i.value?"Login":"Daftar"),1)]),s("div",qe,[s("p",Fe,[v(g(i.value?"Belum punya akun?":"Sudah punya akun?")+" ",1),s("button",{onClick:D,class:"text-blue-500 hover:text-blue-800"},g(i.value?"Daftar sekarang":"Login sekarang"),1)])])],32)])])):p("",!0)]),_:1})]),_:1}))}};export{Ie as default};
